legacy_finance_func = fn d, v -> LegacyFinance.xirr(d, v) end

ex_xirr_func = fn d, v -> ExXirr.xirr(d, v) end

inputs = %{
  "date_values" => %{
    d: [
      {2011, 12, 07},
      {2011, 12, 07},
      {2011, 12, 07},
      {2012, 01, 18},
      {2012, 07, 03},
      {2012, 07, 03},
      {2012, 07, 19},
      {2012, 07, 23},
      {2012, 07, 23},
      {2012, 07, 23},
      {2012, 09, 11},
      {2012, 09, 11},
      {2012, 09, 11},
      {2012, 09, 11},
      {2012, 09, 12},
      {2012, 09, 12},
      {2012, 09, 12},
      {2012, 09, 12},
      {2013, 03, 11},
      {2013, 03, 11},
      {2013, 03, 11},
      {2013, 03, 11},
      {2013, 03, 28},
      {2013, 03, 28},
      {2013, 03, 28},
      {2013, 03, 28},
      {2013, 05, 21},
      {2013, 05, 21},
      {2013, 05, 21},
      {2013, 05, 21},
      {2013, 05, 21},
      {2013, 05, 21},
      {2013, 05, 21},
      {2013, 05, 21}
    ],
    v: [
      105_187.06,
      816_709.66,
      479_069.684,
      937_309.708,
      88622.661,
      100_000.0,
      80000.0,
      403_627.95,
      508_117.9,
      789_706.87,
      -88622.661,
      -789_706.871,
      -688_117.9,
      -403_627.95,
      403_627.95,
      789_706.871,
      88622.661,
      688_117.9,
      45129.14,
      26472.08,
      51793.2,
      126_605.59,
      278_532.29,
      99284.1,
      58238.57,
      113_945.03,
      405_137.88,
      -405_137.88,
      165_738.23,
      -165_738.23,
      144_413.24,
      84710.65,
      -84710.65,
      -144_413.24
    ]
  }
}

Benchee.run(
  %{
    "legacy finance" => fn %{d: dates, v: values} -> legacy_finance_func.(dates, values) end,
    "ex xirr" => fn %{d: dates, v: values} -> ex_xirr_func.(dates, values) end
  },
  formatters: [
    Benchee.Formatters.HTML,
    Benchee.Formatters.Console
  ],
  time: 15,
  warmup: 5,
  inputs: inputs
)
